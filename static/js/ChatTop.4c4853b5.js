(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ChatTop"],{"0f59":function(e,t,o){"use strict";o("b57f")},"1dfc":function(e,t,o){"use strict";o("b91e")},"1ebf":function(e,t,o){},"2c17":function(e,t,o){},7121:function(e,t,o){e.exports=o.p+"static/img/open-zh.9e56c214.png"},"7a7c":function(e,t,o){e.exports=o.p+"static/img/open-en.a4b467ff.png"},"98ca":function(e,t,o){"use strict";o("1ebf")},b57f:function(e,t,o){},b91e:function(e,t,o){},c1af:function(e,t,o){},c1f5:function(e,t,o){e.exports=o.p+"static/img/wallet.349b489d.svg"},de8e:function(e,t,o){"use strict";o("fb6a"),o("b0c0");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-eb9b9b1a"),e=e(),Object(n["popScopeId"])(),e},c={key:0,class:"chat-date"},s={style:{position:"relative",width:"0.8rem",height:"0.8rem"}},a={key:2,class:"icon-svg icon-renzheng",style:{"margin-left":"0.1rem"},"aria-hidden":"true"},r=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-renzheng"},null,-1)})),l=[r],d={class:"chat-info"},u={class:"chat-username"},m={class:"van-ellipsis username"},p={class:"chat-message"},h={key:0},b={key:0,class:"reply-content"},f={class:"top"},v={class:"bottom"},g={key:0,class:"flex-between"},O={class:"dapp"},j={class:"icon-token-container"},k={class:"token-symbol"},y={class:"mt_5 font-12 ellipsis"},_=["innerHTML"],w={class:"chat-time"},$=["id"],C={class:"block"},V={class:"tip"},N={key:0,class:"tip mt-10"},x={key:0,class:"reply-content"},S={class:"top"},B={class:"bottom"},E={key:0,class:"flex-between"},M={class:"dapp"},I={class:"icon-token-container"},D={class:"token-symbol"},T={class:"mt_5 font-12 ellipsis"},P={class:"dapp"},z={class:"icon-token-container"},R={class:"token-symbol"},U={class:"mt_5 font-12 ellipsis"};function F(e,t,i,r,F,H){var J,L,Y,A,G,K=Object(n["resolveComponent"])("van-image"),q=Object(n["resolveComponent"])("van-loading"),Q=Object(n["resolveComponent"])("van-icon"),W=Object(n["resolveComponent"])("van-count-down"),Z=Object(n["resolveComponent"])("van-image-preview"),X=Object(n["resolveComponent"])("van-grid-item"),ee=Object(n["resolveComponent"])("van-grid"),te=Object(n["resolveComponent"])("el-popover"),oe=Object(n["resolveComponent"])("Mute"),ne=Object(n["resolveComponent"])("Kick"),ie=Object(n["resolveComponent"])("draw"),ce=Object(n["resolveDirective"])("click-outside");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[i.showDate?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,Object(n["toDisplayString"])(H.formatCalendar(H.item.created_time)),1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["chat-item",{right:H.isUser(H.item),left:!H.isUser(H.item)}])},[Object(n["createElementVNode"])("div",s,[H.item.user_image?(Object(n["openBlock"])(),Object(n["createBlock"])(K,{key:0,class:"chat-avatar",round:"",width:"0.8rem",height:"0.8rem","icon-size":"0.8rem","lazy-load":"","show-loading":"",src:H.isUser(H.item)&&(null===(J=e.$store.state.chat)||void 0===J||null===(L=J.userInfo)||void 0===L?void 0:L.image)||H.item.user_image,onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return H.isUser(H.item)&&e.$router.push({name:"UserInfo"})}),["stop"]))},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:"chat-avatar",style:Object(n["normalizeStyle"])({backgroundColor:"#"+H.item.user_address.slice(-6),color:H.avatarColor(H.item)}),onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(t){return H.isUser(H.item)&&e.$router.push({name:"UserInfo"})}),["stop"]))},Object(n["toDisplayString"])(H.item.user_address.slice(-2)),5)),2===H.item.member_role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",a,l)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",u,[H.formatRole(H.item)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"role-tag",style:Object(n["normalizeStyle"])({backgroundColor:H.formatRole(H.item,"color")})},Object(n["toDisplayString"])(H.formatRole(H.item)),5)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",m,Object(n["toDisplayString"])(H.isUser(H.item)?(null===(Y=e.$store.state)||void 0===Y||null===(A=Y.chat)||void 0===A||null===(G=A.userInfo)||void 0===G?void 0:G.nickname)||H.item.user_nickname||H.item.user_address.slice(0,4)+"..."+H.item.user_address.slice(-4):H.item.user_nickname||H.item.user_address.slice(0,4)+"..."+H.item.user_address.slice(-4)),1)]),Object(n["createElementVNode"])("div",p,[i.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(q,{key:0,class:"chat-status loading",color:"#1989fa",size:"0.4rem"})):i.error?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"chat-status error iconfont icon-Shapex",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(t){return e.$emit("onReSend",H.item)}),["stop"]))})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(te,{visible:F.showPopover,"onUpdate:visible":t[24]||(t[24]=function(e){return F.showPopover=e}),title:"",placement:"bottom",width:70*H.columnNum(H.item)/50+"rem","popper-class":"chat-popover","popper-options":{modifiers:[{name:"flip",options:{padding:5,fallbackPlacements:["bottom","top","right","left"]}}]}},{reference:Object(n["withCtx"])((function(){var i,c,s,a,r,l,d,u,m,p,J,L,Y,A,G,X,ee,te,oe,ne,ie,se,ae,re,le,de,ue;return[1==H.item.type||2==H.item.type||3==H.item.type||4==H.item.type||5==H.item.type||6==H.item.type||7==H.item.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",h,[1==H.item.type?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"chat-text-content",onClick:t[5]||(t[5]=Object(n["withModifiers"])((function(e){return F.showPopover=!F.showPopover}),["stop"])),onContextmenu:t[6]||(t[6]=Object(n["withModifiers"])((function(){}),["prevent"])),onTouchstartPassive:t[7]||(t[7]=function(e){return H.longTap(H.item)}),onTouchmovePassive:t[8]||(t[8]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)}),onTouchendPassive:t[9]||(t[9]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)})},[H.item.to_msg?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",f,Object(n["toDisplayString"])(H.item.to_msg.user_nickname||((null===(i=H.item.to_msg)||void 0===i||null===(c=i.user_address)||void 0===c||null===(s=c.slice)||void 0===s?void 0:s.call(c,0,4))||"")+"..."+((null===(a=H.item.to_msg)||void 0===a||null===(r=a.user_address)||void 0===r||null===(l=r.slice)||void 0===l?void 0:l.call(r,-4))||"")),1),Object(n["createElementVNode"])("div",v,[7==H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createVNode"])(K,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:H.item.to_msg.content.icon,"error-icon":o("aecc")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(null===(d=H.item.to_msg.content)||void 0===d?void 0:d.name),1)]),Object(n["createElementVNode"])("span",y,Object(n["toDisplayString"])("zh-cn"===H.language||"zh-tw"===H.language?null===(u=H.item.to_msg.content)||void 0===u?void 0:u.intro_zh:null===(m=H.item.to_msg.content)||void 0===m?void 0:m.intro),1)]),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["iconfont icon-dapp link-dapp",{blue:!H.isUser(H.item)}])},null,2)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[4==H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createBlock"])(K,{key:0,width:"20",style:{"min-height":"20px"},fit:"cover","lazy-load":"",src:H.item.to_msg.image_content},{loading:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{type:"spinner",size:"20"})]})),error:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Q,{name:"close",size:"20"})]})),_:1},8,["src"])):4!=H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:Object(n["normalizeClass"])(["van-ellipsis",{pre:F.expand||(null===(p=H.item.to_msg)||void 0===p?void 0:p.content.length)<=60}]),style:{flex:"1"}},Object(n["toDisplayString"])((null===(J=H.item.to_msg)||void 0===J?void 0:J.content)||""),3)):Object(n["createCommentVNode"])("",!0),(null===(L=H.item.to_msg)||void 0===L?void 0:L.content.length)>60?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[F.expand?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"expand",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(e){return F.expand=!1}),["stop"]))},Object(n["toDisplayString"])(e.$t("collapse")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"expand",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return F.expand=!0}),["stop"]))},Object(n["toDisplayString"])(e.$t("expand")),1))],64)):Object(n["createCommentVNode"])("",!0)],64))])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",{innerHTML:H.item.content,style:{"line-height":"1.5"}},null,8,_),Object(n["createElementVNode"])("div",w,Object(n["toDisplayString"])(e.$f.formatDate(H.item.created_time,"HH:mm")),1)],32)),[[ce,H.close]]):Object(n["createCommentVNode"])("",!0),6==H.item.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,id:H.item.id,class:Object(n["normalizeClass"])(["chat-text-content red-packet",{end:-1==JSON.parse(H.item.content).status||1==JSON.parse(H.item.content).status||2==JSON.parse(H.item.content).status||5==JSON.parse(H.item.content).status,receive:4==JSON.parse(H.item.content).status}]),onClick:t[10]||(t[10]=function(e){return H.draw(H.item)})},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("span",C,Object(n["toDisplayString"])(JSON.parse(H.item.content).remark),1),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])(e.$f.filterRedPacketStatus(JSON.parse(H.item.content).status)),1),3==JSON.parse(H.item.content).status||4==JSON.parse(H.item.content).status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N,[F.timeHide?(Object(n["openBlock"])(),Object(n["createBlock"])(W,{key:0,time:H.timeCountDown,onChange:H.changeCountDown},null,8,["time","onChange"])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(K,{class:"icon",src:o("c1f5")},null,8,["src"])],10,$)):Object(n["createCommentVNode"])("",!0),4==H.item.type?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:2,class:"chat-text-content",onClick:t[14]||(t[14]=Object(n["withModifiers"])((function(e){F.showImage=!0,F.showPopover=!1}),["stop"])),onContextmenu:t[15]||(t[15]=Object(n["withModifiers"])((function(){}),["prevent"])),onTouchstartPassive:t[16]||(t[16]=function(e){return H.longTap(H.item)}),onTouchmovePassive:t[17]||(t[17]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)}),onTouchendPassive:t[18]||(t[18]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)})},[H.item.to_msg?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x,[Object(n["createElementVNode"])("div",S,Object(n["toDisplayString"])(H.item.to_msg.user_nickname||((null===(Y=H.item.to_msg)||void 0===Y||null===(A=Y.user_address)||void 0===A||null===(G=A.slice)||void 0===G?void 0:G.call(A,0,4))||"")+"..."+((null===(X=H.item.to_msg)||void 0===X||null===(ee=X.user_address)||void 0===ee||null===(te=ee.slice)||void 0===te?void 0:te.call(ee,-4))||"")),1),Object(n["createElementVNode"])("div",B,[7==H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",E,[Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("div",I,[Object(n["createVNode"])(K,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:H.item.to_msg.content.icon,"error-icon":o("aecc")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",D,Object(n["toDisplayString"])(null===(oe=H.item.to_msg.content)||void 0===oe?void 0:oe.name),1)]),Object(n["createElementVNode"])("span",T,Object(n["toDisplayString"])("zh-cn"===H.language||"zh-tw"===H.language?null===(ne=H.item.to_msg.content)||void 0===ne?void 0:ne.intro_zh:null===(ie=H.item.to_msg.content)||void 0===ie?void 0:ie.intro),1)]),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["iconfont icon-dapp link-dapp",{blue:!H.isUser(H.item)}])},null,2)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[4==H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createBlock"])(K,{key:0,width:"20",style:{"min-height":"100px"},fit:"cover","lazy-load":"",src:H.item.to_msg.image_content},{loading:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{type:"spinner",size:"20"})]})),error:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Q,{name:"close",size:"20"})]})),_:1},8,["src"])):4!=H.item.to_msg.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:Object(n["normalizeClass"])(["van-ellipsis",{pre:F.expand||(null===(se=H.item.to_msg)||void 0===se?void 0:se.content.length)<=60}]),style:{flex:"1"}},Object(n["toDisplayString"])((null===(ae=H.item.to_msg)||void 0===ae?void 0:ae.content)||""),3)):Object(n["createCommentVNode"])("",!0),(null===(re=H.item.to_msg)||void 0===re?void 0:re.content.length)>60?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[F.expand?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"expand",onClick:t[12]||(t[12]=Object(n["withModifiers"])((function(e){return F.expand=!1}),["stop"]))},Object(n["toDisplayString"])(e.$t("collapse")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"expand",onClick:t[11]||(t[11]=Object(n["withModifiers"])((function(e){return F.expand=!0}),["stop"]))},Object(n["toDisplayString"])(e.$t("expand")),1))],64)):Object(n["createCommentVNode"])("",!0)],64))])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(Z,{style:{padding:"0 10px"},show:F.showImage,"onUpdate:show":t[13]||(t[13]=function(e){return F.showImage=e}),images:[H.item.image_content],closeOnPopstate:""},null,8,["show","images"]),Object(n["createVNode"])(K,{width:"100",style:{"min-height":"100px"},fit:"cover","lazy-load":"",src:H.item.image_content},{loading:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{type:"spinner",size:"20"})]})),error:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Q,{name:"close",size:"20"})]})),_:1},8,["src"])],32)),[[ce,H.close]]):Object(n["createCommentVNode"])("",!0),7==H.item.type?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:3,class:"chat-text-content flex-between",onClick:t[19]||(t[19]=Object(n["withModifiers"])((function(e){return H.openDapp(H.item)}),["stop","prevent"])),onContextmenu:t[20]||(t[20]=Object(n["withModifiers"])((function(){}),["prevent"])),onTouchstartPassive:t[21]||(t[21]=function(e){return H.longTap(H.item)}),onTouchmovePassive:t[22]||(t[22]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)}),onTouchendPassive:t[23]||(t[23]=function(){return H.clearTouch&&H.clearTouch.apply(H,arguments)})},[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",z,[Object(n["createVNode"])(K,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:H.item.content.icon,"error-icon":o("aecc")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("span",R,Object(n["toDisplayString"])(null===(le=H.item.content)||void 0===le?void 0:le.name),1)]),Object(n["createElementVNode"])("span",U,Object(n["toDisplayString"])("zh-cn"===H.language||"zh-tw"===H.language?null===(de=H.item.content)||void 0===de?void 0:de.intro_zh:null===(ue=H.item.content)||void 0===ue?void 0:ue.intro),1)]),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["iconfont icon-dapp link-dapp",{blue:!H.isUser(H.item)}])},null,2)],32)),[[ce,H.close]]):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ee,{border:!1,clickable:"","column-num":H.columnNum(H.item)},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(H.actions(H.item),(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[4!=H.item.type&&7!=H.item.type||"copy-o"!=e.icon?(Object(n["openBlock"])(),Object(n["createBlock"])(X,{key:0,text:e.text,style:{"--van-grid-item-content-padding":"5px 10px","--van-grid-item-content-background-color":"transparent"},onClick:function(o){return H.onSelect(H.item,t,e)}},{icon:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])("iconfont icon-".concat(e.icon)),style:{"font-size":"0.4rem"}},null,2)]})),_:2},1032,["text","onClick"])):Object(n["createCommentVNode"])("",!0)],64)})),128))]})),_:1},8,["column-num"])]})),_:1},8,["visible","width"])])])],2),Object(n["createVNode"])(oe,{ref:"mute",visible:F.visible,"onUpdate:visible":t[25]||(t[25]=function(e){return F.visible=e}),onOnSubmit:H.mute},null,8,["visible","onOnSubmit"]),Object(n["createVNode"])(ne,{ref:"kick",visible:F.visible1,"onUpdate:visible":t[26]||(t[26]=function(e){return F.visible1=e}),onOnSubmit:H.kick},null,8,["visible","onOnSubmit"]),Object(n["createVNode"])(ie,{ref:"ref_draw",onOnModifyChatGroupHistoryMsg:H.onModifyChatGroupHistoryMsg},null,8,["onOnModifyChatGroupHistoryMsg"])],64)}var H=o("2909"),J=(o("a9e3"),o("99af"),o("2ca0"),o("d3b7"),o("e9c4"),o("365c")),L=o("fa7d"),Y=o("b04f"),A={class:"popup-title"},G={class:"form-submit"};function K(e,t,o,i,c,s){var a=Object(n["resolveComponent"])("van-radio"),r=Object(n["resolveComponent"])("van-radio-group"),l=Object(n["resolveComponent"])("van-button"),d=Object(n["resolveComponent"])("van-form"),u=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{show:s.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return s.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",A,Object(n["toDisplayString"])(e.$t("kickOutChat")),1),Object(n["createVNode"])(d,{class:"popup-content",onSubmit:s.confirmSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{modelValue:c.checked,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.checked=e})},{default:Object(n["withCtx"])((function(){return[s.role>1.5?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:0,class:"mb_10",name:3},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("kickOutTheChatAllSpeakers")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0),s.role>1.5?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:1,class:"mb_10",name:2},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("kickOutAllChat")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(a,{class:"mb_10",name:1},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("kickOutTheChat")),1)]})),_:1})]})),_:1},8,["modelValue"]),Object(n["createElementVNode"])("div",G,[Object(n["createVNode"])(l,{class:"btn",round:"",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return s.dialogVisible=!1}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("cancel")),1)]})),_:1}),Object(n["createVNode"])(l,{class:"btn",round:"","native-type":"submit",type:"primary",loading:c.loading},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1},8,["loading"])])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var q={name:"Mute",props:{visible:Boolean},emits:["update:visible","onSubmit"],data:function(){return{time:"",checked:3,loading:!1,placeholder:this.$t("pSelectBanExpirationTime"),showPicker:!1,minDate:new Date}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t}},watch:{},methods:{confirmSubmit:function(){this.$emit("onSubmit",this.checked)}}},Q=(o("1dfc"),o("6b0d")),W=o.n(Q);const Z=W()(q,[["render",K],["__scopeId","data-v-2b2a87f1"]]);var X=Z,ee={class:"red-packet"},te={class:"wrapper"},oe={style:{width:"100%",position:"relative"}},ne={class:"packet"},ie={ref:"slide",class:"slide"},ce={class:"info"},se={class:"color-FFDA71 mt-25 block"},ae={class:"font-22 color-FFDA71 mt-18 block"},re={class:"tip"},le={class:"success",ref:"success"},de={class:"color-333 font-16 block mt-25"},ue={class:"color-FF3C3C font-22 block mt-25"},me={class:"color-333 block mt_5 flex"},pe={class:"padding-15"},he={class:"color-fff font-12 mt-10"},be={class:"tip",style:{"margin-bottom":"74px"}},fe={ref:"slide",class:"slide transition"},ve={class:"relative"},ge={class:"color-FFDA71 mt-55 block"},Oe={class:"font-22 color-FFDA71 mt-120 block"},je={class:"bottom"};function ke(e,t,i,c,s,a){var r=Object(n["resolveComponent"])("van-icon"),l=Object(n["resolveComponent"])("van-image"),d=Object(n["resolveComponent"])("van-button"),u=Object(n["resolveComponent"])("van-overlay"),m=Object(n["resolveComponent"])("RedPacketValidateDialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ee,[Object(n["createVNode"])(u,{show:s.show,onClick:t[5]||(t[5]=function(e){return s.show=!1})},{default:Object(n["withCtx"])((function(){var i,c,u,m,p,h,b,f,v,g,O,j;return[Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("div",oe,[Object(n["createVNode"])(r,{class:"icon",name:"close",onClick:t[0]||(t[0]=function(e){return s.show=!1}),style:{position:"absolute"}}),Object(n["createElementVNode"])("div",{class:"flex",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(){}),["stop"])),style:{"justify-content":"center",width:"100%"}},[Object(n["createElementVNode"])("div",ne,[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",ie,null,512),Object(n["createElementVNode"])("button",{class:"play",ref:"ref_play",onClick:t[1]||(t[1]=function(){return a.clickOpen&&a.clickOpen.apply(a,arguments)})},["en"===a.language?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,round:"",width:"80px",height:"80px","icon-size":"80px","lazy-load":"","show-loading":"",src:o("7a7c")},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:1,round:"",width:"80px",height:"80px","icon-size":"80px","lazy-load":"","show-loading":"",src:o("7121")},null,8,["src"]))],512),Object(n["createElementVNode"])("div",ce,[Object(n["createElementVNode"])("span",se,Object(n["toDisplayString"])(e.$t("whoSend",{user:s.user_nickname||((null===(i=s.redPacket)||void 0===i||null===(c=i.creator_address)||void 0===c||null===(u=c.slice)||void 0===u?void 0:u.call(c,0,4))||"")+"..."+((null===(m=s.redPacket)||void 0===m||null===(p=m.creator_address)||void 0===p||null===(h=p.slice)||void 0===h?void 0:h.call(p,-4))||"")})),1),Object(n["createElementVNode"])("span",ae,Object(n["toDisplayString"])(s.redPacket.remark),1)])],512),[[n["vShow"],3==s.status]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",re,[Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({"background-image":"url("+o("e23c")+")"})},[Object(n["createElementVNode"])("span",de,Object(n["toDisplayString"])(e.$t("congratulations1")),1),Object(n["createElementVNode"])("span",ue,Object(n["toDisplayString"])(e.$f.formatNumber2(s.receive_result.amount)||0)+Object(n["toDisplayString"])(e.$t("per")),1),Object(n["createElementVNode"])("div",me,[Object(n["createVNode"])(l,{round:"",width:"18px",height:"18px","icon-size":"18px","lazy-load":"","show-loading":"",class:"icon-left",src:e.$f.formatIcon("".concat(s.receive_result.contract_address,"-").concat(s.receive_result.contract_chain)),"error-icon":o("aecc")},null,8,["src","error-icon"]),Object(n["createTextVNode"])("  "+Object(n["toDisplayString"])(s.receive_result.contract_symbol||"--"),1)])],4)],512),Object(n["createElementVNode"])("div",pe,[Object(n["createElementVNode"])("span",he,"*"+Object(n["toDisplayString"])(e.$t("tipDraw")),1),Object(n["createVNode"])(d,{class:"mt-10",round:"",color:"#FFDA71",style:{width:"100%",color:"#dd3b3b"},onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return s.show=!1}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("iKnown")),1)]})),_:1})])],512),[[n["vShow"],8==s.status]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("div",fe,null,512),Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("span",ge,Object(n["toDisplayString"])(e.$t("whoSend",{user:s.user_nickname||((null===(b=s.redPacket)||void 0===b||null===(f=b.creator_address)||void 0===f||null===(v=f.slice)||void 0===v?void 0:v.call(f,0,4))||"")+"..."+((null===(g=s.redPacket)||void 0===g||null===(O=g.creator_address)||void 0===O||null===(j=O.slice)||void 0===j?void 0:j.call(O,-4))||"")})),1),Object(n["createElementVNode"])("span",Oe,Object(n["toDisplayString"])(e.$f.filterRedPacketStatus(s.status)),1)])],512),[[n["vShow"],-1==s.status||1==s.status||4==s.status||5==s.status]]),Object(n["createElementVNode"])("div",je,[Object(n["createElementVNode"])("a",{href:"",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(){return a.jump&&a.jump.apply(a,arguments)}),["stop","prevent"]))},Object(n["toDisplayString"])(e.$t("seeLuck"))+">",1)])])])])])]})),_:1},8,["show"]),Object(n["createVNode"])(m,{ref:"redValid",visible:s.validateVisible,"onUpdate:visible":t[6]||(t[6]=function(e){return s.validateVisible=e}),onOnSubmit:a.openRedPacket},null,8,["visible","onOnSubmit"])])}var ye=o("1da1"),_e=(o("96cf"),{class:"popup-title"}),we={class:"captchaCode"},$e=["src"],Ce=["disabled"],Ve={class:"footer"};function Ne(e,t,o,i,c,s){var a=Object(n["resolveComponent"])("van-field"),r=Object(n["resolveComponent"])("van-button"),l=Object(n["resolveComponent"])("van-form"),d=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{show:s.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return s.dialogVisible=e}),class:"popup-container",closeable:!1,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"auto"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",_e,Object(n["toDisplayString"])(e.$t("securityVerification")),1),Object(n["createVNode"])(l,{class:"popup-content",ref:"formRef",onSubmit:s.onSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",we,[Object(n["createElementVNode"])("img",{class:"image-captchaCode",src:c.captchaCode.image,alt:"",srcset:""},null,8,$e),Object(n["createElementVNode"])("button",{class:"btn-text",type:"button",disabled:c.disabled,onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return s.getCaptcha&&s.getCaptcha.apply(s,arguments)}),["stop","prevent"]))},Object(n["toDisplayString"])(e.$t("refreshCode")),9,Ce)]),Object(n["createVNode"])(a,{modelValue:c.form.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.value=e}),modelModifiers:{trim:!0},placeholder:e.$t("enterCalculation"),clearable:"",rules:s.rules},null,8,["modelValue","placeholder","rules"]),Object(n["createElementVNode"])("div",Ve,[Object(n["createVNode"])(r,{class:"btn","native-type":"submit",loading:c.loading,disabled:c.disabled,type:"primary",block:""},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("verify")),1)]})),_:1},8,["loading","disabled"])])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var xe={name:"ValidateDialog",props:{visible:Boolean},emits:["update:visible","onSubmit"],data:function(){return{form:{value:""},captchaCode:{captcha_id:"",image:""},loading:!1,disabled:!1}},computed:{rules:function(){return[{required:!0,message:this.$t("enterCalculation"),trigger:"blur"}]},dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&this.reset()}},created:function(){this.reset()},methods:{reset:function(){var e,t,o;this.visible&&(this.form.value="",null===(e=this.$refs)||void 0===e||null===(t=e.formRef)||void 0===t||null===(o=t.resetValidation)||void 0===o||o.call(t),this.getCaptcha())},onSubmit:function(){this.$emit("onSubmit",{captcha_id:this.captchaCode.captcha_id,captcha_value:this.form.value})},getCaptcha:function(){var e=this;this.disabled=!0,Object(J["Ub"])().then((function(t){e.captchaCode=t})).catch((function(t){t&&"string"===typeof t&&e.$toast({message:t,position:"top"})})).finally((function(){e.disabled=!1}))}}};o("98ca");const Se=W()(xe,[["render",Ne],["__scopeId","data-v-6ced939b"]]);var Be=Se,Ee={name:"RedDraw",components:{RedPacketValidateDialog:Be},emits:["onModifyChatGroupHistoryMsg"],data:function(){return{show:!1,packetId:0,groupId:0,status:0,receive_result:{},redPacket:{},user_nickname:"",id:0,validateVisible:!1}},computed:{language:function(){return this.$store.getters.language}},methods:{init:function(e){var t=this;return Object(ye["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.id=e.id,t.redPacket=JSON.parse(e.content),t.user_nickname=e.user_nickname,t.packetId=JSON.parse(e.content).id,t.groupId=e.group_id,t.status=t.redPacket.status,2!=t.status&&3!=t.status){o.next=9;break}return o.next=9,t.viewDetailRedPacket();case 9:t.show=!0;case 10:case"end":return o.stop()}}),o)})))()},clickOpen:function(){this.validateVisible=!0},openRedPacket:function(e){var t=this,o=e.captcha_id,n=e.captcha_value;this.validateVisible=!1,this.$refs.ref_play.style["animation-duration"]="1s",setTimeout((function(){t.receiveRedPacket(t.id,o,n)}),1e3)},receiveRedPacket:function(e,t,o){var n=this,i={group_id:this.groupId,packet_id:this.packetId,captcha_id:t,captcha_value:o};Object(J["Rc"])(i).then((function(t){t.receive_status>0?(n.status=8,n.$emit("onModifyChatGroupHistoryMsg",e,{status:4}),n.receive_result=t.receive_result,n.$store.dispatch("getUnreceivedredpacket")):n.status=t.status})).catch((function(e){n.$toast(e||n.$t("receiveFailed")),n.show=!1,console.log(e)})).finally((function(){n.$refs.ref_play.style["animation-duration"]="0s"}))},viewDetailRedPacket:function(){var e=this,t={groupId:this.groupId,redPacketId:this.packetId},o=this.$toast.loading({message:"Loading...",forbidClick:!0,duration:0});return new Promise((function(n,i){Object(J["xd"])(t).then((function(t){e.status=null===t||void 0===t?void 0:t.status,e.$emit("onModifyChatGroupHistoryMsg",e.id,{status:e.status}),n(!0)})).catch((function(t){e.$notify({type:"danger",message:"View Failed"}),console.log(t),i(!1)})).finally((function(){o.clear()}))}))},jump:function(){this.$router.push("/chat/".concat(this.groupId,"/redRecord?packetId=").concat(this.packetId)),this.show=!1}}};o("0f59");const Me=W()(Ee,[["render",ke],["__scopeId","data-v-2821e740"]]);var Ie=Me,De=o("15ef"),Te=(o("7750"),{name:"ChatItem",components:{Mute:Y["a"],Kick:X,ElPopover:De["a"],Draw:Ie},props:{index:{type:Number},source:{type:Object,default:function(){return{}}},loading:{type:Boolean},error:{type:Boolean},listLoading:{type:Boolean},showDate:{type:Boolean},isTop:{type:Boolean,default:!1}},emits:["onRemove","onRemoveUser","onReply","onReSend","onUnpin","onRefreshPin","onLogin","onModifyChatGroupHistoryMsg"],data:function(){return{timer:null,showPopover:!1,visible:!1,visible1:!1,curItem:{},expand:!1,redPacketMsg:{},timeHide:!0,reportVisible:!1,showImage:!1}},computed:{item:function(){return this.source},chatToken:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.chatToken)||""},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t},groupId:function(){return this.$store.state.chat.groupId},groupInfo:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.groupInfo)||{id:"",name:"",nickname:""}},groupMemberInfo:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.groupMemberInfo)||{}},timeCountDown:function(){var e=0;if(6==this.item.type){var t=JSON.parse(this.item.content);1e3*((null===t||void 0===t?void 0:t.created_time)+(null===t||void 0===t?void 0:t.end_time))-(new Date).getTime()>0&&(e=1e3*((null===t||void 0===t?void 0:t.created_time)+(null===t||void 0===t?void 0:t.end_time))-(new Date).getTime())}return e},language:function(){return this.$store.getters.language}},methods:{actions:function(e){var t,o,n,i,c=(1===this.role||1.5===this.role)&&1===e.is_pined;if(this.isTop)return[{text:this.$t("copy"),id:"copy",icon:"copy-o"}].concat(Object(H["a"])(c?[{text:this.$t("unpin"),id:"unpin",icon:"top"}]:[]));var s=(null===(t=this.$store.state)||void 0===t||null===(o=t.chat)||void 0===o||null===(n=o.groupMemberInfo)||void 0===n?void 0:n.group_id)&&this.chatToken&&(this.role>0||e.user_address===this.$store.state.chat.userInfo.address&&e.user_chain===this.$store.state.chat.userInfo.chain),a=!(0===this.role||this.role<=e.role||this.role<=e.user_role),r=this.chatToken&&(0===this.groupMemberInfo.status&&(0===this.groupInfo.status||3===this.groupInfo.status)&&0===(null===(i=this.$store.state.chat)||void 0===i?void 0:i.userInfo.status)||this.role>1),l=(1===this.role||1.5===this.role)&&0===e.is_pined&&7!=e.type,d=this.chatToken;return[{text:this.$t("copy"),id:"copy",icon:"copy-o"}].concat(Object(H["a"])(r?[{text:this.$t("reply"),id:"reply",icon:"reply"}]:[]),Object(H["a"])(s?[{text:this.$t("delete"),id:"delete",icon:"delete"}]:[]),Object(H["a"])(a?[{text:this.$t("ban"),id:"ban",icon:"ban"},{text:this.$t("remove"),id:"kick",icon:"kick"}]:[]),Object(H["a"])(l?[{text:this.$t("pin"),id:"top",icon:"top"}]:[]),Object(H["a"])(c?[{text:this.$t("unpin"),id:"unpin",icon:"top"}]:[]),Object(H["a"])(d?[{text:this.$t("report"),id:"report",icon:"report"}]:[]))},columnNum:function(e){return Math.min(4,this.actions(e).length)},longTap:function(){var e=this;this.loading||this.listLoading||(clearTimeout(this.timer),this.timer=setTimeout((function(){e.timer=null,e.showPopover=!0}),500))},clearTouch:function(){this.timer&&clearTimeout(this.timer)},close:function(){this.showPopover=!1},onSelect:function(e,t,o){var n=this;"delete"===o.id?this.$dialog.confirm({message:this.$t("confirmDeleteMessage"),confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((function(){var t,o;null!==(t=String(null===e||void 0===e?void 0:e.id))&&void 0!==t&&null!==(o=t.startsWith)&&void 0!==o&&o.call(t,"send-")?n.$emit("onRemove"):(n.$toast.loading({forbidClick:!1,duration:0}),Object(J["Vc"])(e.id).then((function(e){console.log(e),n.$emit("onRemove")})).catch((function(e){console.log(e),n.$toast({message:e,position:"top"})})))})).catch((function(){})):"copy"===o.id?Object(L["c"])(e.content):"ban"===o.id?(this.curItem=e,this.visible=!0):"kick"===o.id?(this.curItem=e,this.visible1=!0):"reply"===o.id?this.$emit("onReply",e):"top"===o.id?this.pinMsg(e):"unpin"===o.id?this.unpinMsg(e):"report"===o.id&&this.$store.dispatch("openChatReport",e.id)},mute:function(e){var t=this;this.$refs.mute.loading=!0;var o=this.curItem;Object(J["rd"])(this.groupId,o.user_address,o.user_chain,e.user_status,e.banned_expired).then((function(e){e&&(t.$toast.success(t.$t("bannedSuccessfully")),t.visible=!1)})).catch((function(e){console.log(e),t.$toast.fail(e)})).finally((function(){t.$refs.mute.loading=!1}))},kick:function(e){var t=this;if(1===e){this.$refs.kick.loading=!0;var o=this.curItem,n={group_id:this.groupId,user_address:o.user_address,user_chain:o.user_chain};Object(J["Uc"])(n).then((function(e){var o,i;e&&(null!==(o=t.$refs)&&void 0!==o&&null!==(i=o.kick)&&void 0!==i&&i.loading&&(t.$refs.kick.loading=!1),t.visible1=!1,t.$emit("onRemoveUser",n))})).catch((function(e){var o,n;null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),console.log(e),t.$toast.fail(e)}))}else if(2===e){this.$refs.kick.loading=!0;var i=this.curItem,c={user_address:i.user_address,user_chain:i.user_chain};Object(J["Zc"])(c).then((function(e){var o,n;e&&(null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.visible1=!1,t.$emit("onRemoveUser",c))})).catch((function(e){var o,n;console.log(e),null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.$toast.fail(e)}))}else if(3===e){this.$refs.kick.loading=!0;var s=this.curItem,a={group_id:s.group_id,msg_id:s.id};Object(J["ad"])(a).then((function(e){var o,n;e&&(null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.visible1=!1,t.$emit("onRemoveUser",a))})).catch((function(e){var o,n;console.log(e),null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.$toast.fail(e)}))}},pinMsg:function(e){var t=this;this.$toast.loading({forbidClick:!1,duration:0}),Object(J["Qc"])(e.id).then((function(e){console.log(e),t.$toast({message:t.$t("pinSuccess"),position:"top"}),t.$emit("onRefreshPin")})).catch((function(e){console.log(e),t.$toast({message:e,position:"top"})}))},unpinMsg:function(e){var t=this;this.$dialog.confirm({message:this.$t("confirmUnpinMsg"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((function(){t.$toast.loading({forbidClick:!1,duration:0}),Object(J["od"])(e.id).then((function(o){console.log(o),t.$toast({message:t.$t("unpinSuccess"),position:"top"}),t.$emit("onUnpin",e),t.$emit("onRefreshPin")})).catch((function(e){console.log(e),t.$toast({message:e,position:"top"})}))})).catch((function(){}))},avatarColor:function(e){var t=e.user_address.slice(-6),o=.2126*Number("0x"+t.slice(0,2)),n=.7152*Number("0x"+t.slice(2,4)),i=.0722*Number("0x"+t.slice(4,6)),c=o+n+i,s=c/255,a="hsl(0, 0%, ".concat(-999999*(s-.6),"%");return a},isUser:function(e){var t,o,n,i,c,s;return e.user_address===(null===(t=this.$store.state)||void 0===t||null===(o=t.chat)||void 0===o||null===(n=o.userInfo)||void 0===n?void 0:n.address)&&e.user_chain===(null===(i=this.$store.state)||void 0===i||null===(c=i.chat)||void 0===c||null===(s=c.userInfo)||void 0===s?void 0:s.chain)},formatCalendar:function(e){var t=this.$dayjs(1e3*e).isToday();if(t)return this.$dayjs(1e3*e).format("HH:mm");var o=this.$dayjs(1e3*e).isYesterday();return o?this.$t("yesterday")+" "+this.$dayjs(1e3*e).format("HH:mm"):this.$dayjs(1e3*e).format("YYYY-MM-DD")},formatRole:function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=2===e.member_role?1.5:e.member_role,i=Math.max(n,e.user_role),c={0:{name:"",role:0,color:"#1FD0A3"},1:{name:this.$t("admin"),role:1,color:"#1FD0A3"},1.5:{name:this.$t("projectParty"),role:1.5,color:"#3F80F7"},2:{name:this.$t("inspector"),role:2,color:"#FFC800"},3:{name:this.$t("superAdmin"),role:3,color:"#1FD0A3"}};return(null===c||void 0===c||null===(t=c[i])||void 0===t?void 0:t[o])||""},draw:function(e){var t,o,n,i;this.$store.getters.netId===(null===(t=this.$store.state.chat)||void 0===t?void 0:t.userInfo.chain)||""===(null===(o=this.$store.state.chat)||void 0===o?void 0:o.userInfo.chain)?null!==(n=this.groupMemberInfo)&&void 0!==n&&n.group_id&&1!==(null===(i=this.groupMemberInfo)||void 0===i?void 0:i.is_leave)?""===this.$store.state.chat.userInfo.address?this.$emit("onLogin"):3!=JSON.parse(e.content).status?this.$router.push("/chat/".concat(this.groupId,"/redRecord?packetId=").concat(JSON.parse(e.content).id)):this.$refs.ref_draw.init(e):this.$toast(this.$t("tipJoin")):this.$toast(this.$t("tipSwitchChain",{chain:"BSC"}))},onModifyChatGroupHistoryMsg:function(e,t){this.$emit("onModifyChatGroupHistoryMsg",e,t)},viewDetailRedPacket:function(e){var t=this,o={groupId:this.groupId,redPacketId:JSON.parse(e.content).id};return new Promise((function(n,i){Object(J["xd"])(o).then((function(o){console.log("details",o),t.onModifyChatGroupHistoryMsg(e.id,{status:null===o||void 0===o?void 0:o.status}),n(!0)})).catch((function(e){console.log(e),i(!1)})).finally((function(){}))}))},changeCountDown:function(e){e&&0===(null===e||void 0===e?void 0:e.days)&&0===(null===e||void 0===e?void 0:e.hours)&&0===(null===e||void 0===e?void 0:e.minutes)&&0===(null===e||void 0===e?void 0:e.seconds)&&(this.timeHide=!1,this.viewDetailRedPacket(this.item))},openDapp:function(e){var t=JSON.stringify(e.content);this.$f.openBrowserDapp(t)}}});o("fb1e");const Pe=W()(Te,[["render",F],["__scopeId","data-v-eb9b9b1a"]]);t["a"]=Pe},deef:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-17dc1189"),e=e(),Object(n["popScopeId"])(),e},c={class:"top-container"},s={class:"chat-container"},a={class:"chat-content"},r=i((function(){return Object(n["createElementVNode"])("li",{class:"scroll-bottom"},null,-1)}));function l(e,t,o,i,l,d){var u=Object(n["resolveComponent"])("van-nav-bar"),m=Object(n["resolveComponent"])("ChatItem"),p=Object(n["resolveComponent"])("van-list");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",c,[Object(n["createVNode"])(u,{"left-text":"","left-arrow":"",onClickLeft:t[0]||(t[0]=function(t){return e.$f.goBack()}),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("topMessages"))+"("+Object(n["toDisplayString"])(l.total)+") ",1)]})),_:1}),Object(n["createElementVNode"])("ul",s,[Object(n["createVNode"])(p,{loading:l.loading,"onUpdate:loading":t[1]||(t[1]=function(e){return l.loading=e}),finished:l.finished,error:l.error,"onUpdate:error":t[2]||(t[2]=function(e){return l.error=e}),offset:"200","error-text":e.$t("errorText"),onLoad:d.onLoad,direction:"up","loading-text":e.$t("loading"),"finished-text":e.$t("hasReachedTop")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.topMessages,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:e.id,source:e,index:t,showDate:d.isShowDate(e,t),isTop:"",onOnUnpin:function(e){return d.handleUnpin(t,e)}},null,8,["source","index","showDate","onOnUnpin"])})),128)),r])]})),_:1},8,["loading","finished","error","error-text","onLoad","loading-text","finished-text"])])])}var d=o("5530"),u=(o("c740"),o("a434"),o("d3b7"),o("d81d"),o("99af"),o("de8e")),m=o("365c"),p={name:"ChatTop",components:{ChatItem:u["a"]},data:function(){return{total:0,topMessages:[],count:7,loading:!1,finished:!1,error:!1}},computed:{startId:function(){var e,t;return(null===(e=this.topMessages)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)||-1},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t},groupId:function(){return this.$store.state.chat.groupId}},watch:{"$store.state.ws.chatMsg":function(e){if(e.group_id===this.$store.state.chat.groupId)if("delete_msg"!==e.action){if("pin_msg"!==e.action)if("unpin_msg"!==e.action);else{var t=this.topMessages.findIndex((function(t){return t.id===e.id}));t>-1&&(this.topMessages[t].is_pined=0)}else if(e.msg){var o=JSON.parse(null===e||void 0===e?void 0:e.msg);this.topMessages.push(o)}}else{var n=this.topMessages.findIndex((function(t){return t.id===e.id}));n>-1&&this.topMessages.splice(n,1)}}},activated:function(){this.init()},methods:{init:function(){this.isInit=!0,this.finished=!1,this.error=!1,this.loading||this.getPinMsg(-1)},isShowDate:function(e,t){if(0===t)return!0;var o=this.$f.formatDate(e.created_time,"YYYY-MM-DD"),n=this.$f.formatDate(this.topMessages[t-1].created_time,"YYYY-MM-DD");return o!==n},getPinMsg:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startId;this.groupId&&(this.loading=!0,Object(m["Qb"])(this.groupId,this.count,t).then((function(t){var o,n,i,c,s,a,r;e.finished=(null===(o=t)||void 0===o||null===(n=o.pin_msg)||void 0===n?void 0:n.length)<e.count,e.total=(null===(i=t)||void 0===i?void 0:i.total_msg)||0,t=null===(c=t)||void 0===c||null===(s=c.pin_msg)||void 0===s||null===(a=s.map)||void 0===a?void 0:a.call(s,(function(e){var t=Object(d["a"])({},e);return null!==e&&void 0!==e&&e.to_msg&&(t.to_msg=JSON.parse(e.to_msg)),t}));var l=0,u=0;null!==(r=e.topMessages)&&void 0!==r&&r[0]&&(l=document.body.scrollHeight,u=document.documentElement.scrollTop||window.pageYOffset),e.isInit?e.topMessages=t:e.topMessages=t.concat(e.topMessages),e.$nextTick((function(){if(e.isInit)e.isInit=!1,e.scrollBottom(!0);else{var t=document.body.scrollHeight;document.scrollingElement.scrollTop=t-l+u}}))})).catch((function(){e.error=!0})).finally((function(){setTimeout((function(){e.loading=!1}),1e3)})))},handleUnpin:function(e){this.topMessages.splice(e,1),this.total--},onLoad:function(){this.getPinMsg()},scrollBottom:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.body.scrollHeight,o=document.documentElement.scrollTop||window.pageYOffset,n=window.innerHeight||document.documentElement.clientHeight,i=t-o;i>2*n&&!e||this.$nextTick((function(){setTimeout((function(){var e,t=document.querySelector(".scroll-bottom");null===t||void 0===t||null===(e=t.scrollIntoView)||void 0===e||e.call(t,!0)}),10)}))}}},h=(o("f93e"),o("6b0d")),b=o.n(h);const f=b()(p,[["render",l],["__scopeId","data-v-17dc1189"]]);t["default"]=f},e23c:function(e,t,o){e.exports=o.p+"static/img/drawBg.eaaa75d7.svg"},f93e:function(e,t,o){"use strict";o("2c17")},fb1e:function(e,t,o){"use strict";o("c1af")}}]);